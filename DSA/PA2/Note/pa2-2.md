#  Cricuit

### 数据结构

本题使用字典树（$TrieTree$）的数据结构。

### 构思

每一位使用一个$int$存储$B$位数字，树高为$64/B + 1$。 每个节点最坏情况有$2^{B}$个孩子。

用数组模拟邻接连表，存储每个节点与其孩子的连接关系

由于本题要求删除信息的操作，所以在每个节点用$siz$记录其子树有几个叶节点。若某节点$siz=0$说明此节点已被删除，此时不存在。

在叶节点需要额外记录对应的元件信息

### 原理

元件可被一个64位二进制数表示。

对元件$a$异或取最大值，即为从高位向下贪心。每次取当前位能得到的最大异或值向子节点转移，最终转移到叶节点，此叶节点对应的元件即是获得与$a$异或得最大值的元件。

正确性：由于二进制第$n$位为$2^{n-1}$，等于$0～n-1$ 位之和，所以贪心一定能获得更大的结果。

删除时，由于一次删除一条信息，只要将对应叶节点的所有祖先的$siz$减1即可。

### 实现要点

合理选择$B$的数值，令时间与空间达到平衡

对第0个到第k个都相同情况的特判：若第0个为0，则输出1

###　遇到的困难

- 第一版：B=1。主席树结构

  节点总数$64n$导致$MLE$

- 第二版：B=1。如上文字典树结构

  节点总数小于$64n$ ，但是仍然没有解决问题

- 第三版：B=6

  节点数小于$11n$，

  解决了$MLE$，出现了$TLE$

- 第四版：B=4

  节点数小于$16n$，

  平衡了时间与空间，成功通过

###　复杂度估计

- 时间复杂度

  建树的时间为$O(k)$，由于树高一定为16，插入、删除、查询的时间均为$O(1)$

  共操作$n-k+1$次

  总时间为$O(k)+(n-k+1)O(1)=O(n)$

- 空间复杂度

  叶子节点共$n$个，树高为$16$，那么空间复杂度为$O(n)$